Sekarang saatnya kita menjadi **Security Guard**.

Jaringan kamu sekarang "Terlalu Bebas". Siapa saja bisa ping siapa saja. Di dunia nyata, ini bahaya. Karyawan magang gak boleh ping Server Gaji.

Kita gass ke Stage 4?

-----

## STAGE 4: The Firewall (Access Control List - ACL)

### ğŸ§  Logika Dasar: Satpam Klub Malam

Router itu punya fitur bernama **ACL (Access Control List)**. Ini adalah daftar nama yang dipegang Satpam di pintu masuk.

  * **Permit:** Boleh masuk.
  * **Deny:** Dilarang masuk (Ditendang).

Ada aturan main ACL yang paling penting:

> **"ACL dibaca dari baris paling atas ke bawah. Kalau sudah cocok, baris bawahnya tidak dibaca lagi."**

### ğŸ› ï¸ Lab Time: Blokir Si Magang\!

**Skenario:**
Kita pakai topologi OSPF yang sudah jadi (R1, R2, R3).

  * **R1 (Loopback 1.1.1.1):** Anggap ini PC **BOS**.
  * **R3 (Loopback 3.3.3.3):** Anggap ini PC **MAGANG**.
  * **R2 (Loopback 2.2.2.2):** Anggap ini **SERVER RAHASIA**.

**Misi:**

1.  **BOS (R1)** harus BISA ping ke Server (R2).
2.  **MAGANG (R3)** HARUS GAGAL (Request Timed Out) kalau ping ke Server (R2).
3.  Tapi Magang boleh ping ke Bos (R1). Jadi cuma Server R2 yang anti-magang.

#### Langkah 1: Cek Kondisi Awal (Wajib\!)

Sebelum pasang aturan, pastikan semua **BISA** ping dulu.

  * Di R1: `ping 2.2.2.2` -\> Harus sukses (\!\!\!\!\!).
  * Di R3: `ping 2.2.2.2` -\> Harus sukses (\!\!\!\!\!).

#### Langkah 2: Membuat Aturan (ACL) di R2

Kenapa di R2? Karena R2 adalah "pemilik rumah" (Server). Satpam ditaruh di pintu R2.

Masuk ke **R2**:

```bash
configure terminal
```
**! Membuat Daftar Larangan (Extended ACL nomor 100)</br>**
**! Aturan 1: Tolak paket dari Magang (3.3.3.3) yang mau ke Saya (2.2.2.2)</br>**
```bash
access-list 100 deny ip host 3.3.3.3 host 2.2.2.2
```
**! Aturan 2: Izinkan sisanya (Wajib! Kalau gak ada ini, semua orang ditolak)**
```bash
access-list 100 permit ip any any
```

*Penjelasan:*

  * `deny ip host 3.3.3.3 host 2.2.2.2`: Tolak spesifik dari 3.3.3.3 ke 2.2.2.2.
  * `permit ip any any`: Izinkan paket lain selain aturan di atas. (Ingat: Secara default, ACL itu punya aturan tersembunyi di paling bawah yaitu "Tolak Semua". Jadi kita harus kasih izin "Any" di akhir).

#### Langkah 3: Menerapkan Aturan ke Pintu (Interface)

Aturan (ACL) cuma kertas catatan. Gak akan ngefek kalau gak ditempel di pintu satpam.
Kita tempel di interface **Loopback 0** milik R2 (karena 2.2.2.2 ada di situ), atau bisa juga di pintu masuk fisik. Biar lebih terasa efeknya, kita pasang di pintu masuk fisik arah R3.

Tapi, cara paling aman dan umum untuk lab ini, kita pasang di **arah masuk (in)** pada interface yang mengarah ke R3.
Asumsikan **R2 f0/1** terhubung ke R3 (cek topologi kamu, sesuaikan interfacenya\!).

Misal R2 f0/1 nyambung ke R3:

```bash
interface fastEthernet 0/1
```
```bash
 ip access-group 100 in
```
```bash
 exit
```

*Artinya:* "Wahai interface f0/1, kalau ada paket masuk (**in**), tolong cek daftar buku tamu nomor **100** tadi."

#### Langkah 4: Pembuktian (Verification)

1.  **Tes BOS (R1):**
    `ping 2.2.2.2` -\> Harus SUKSES (\!\!\!\!\!).
    *(Karena Bos tidak ada di daftar Deny).*

2.  **Tes MAGANG (R3):**
    `ping 2.2.2.2` -\> Harus **U.U.U.U.U**
    *(U = Unreachable / Administratively Prohibited. Artinya Satpam nendang paketnya).*

3.  **Tes MAGANG ke BOS (R3 ping R1):**
    `ping 1.1.1.1` -\> Harus SUKSES.
    *(Karena larangan cuma ke R2).*

-----

### ğŸ•µï¸â€â™‚ï¸ Analisis Pesan Error

Coba perhatikan bedanya error ping:

  * **`. . . .` (Request Timed Out):** Paket hilang/nyasar/jalur putus.
  * **`U.U.U.U` (Unreachable):** Paket SAMPAI di router, tapi DITOLAK oleh admin/ACL. Ini tanda kamu berhasil jadi admin galak.

**Challenge:**
Coba kamu setting ACL tersebut. Kalau berhasil muncul "U.U.U", berarti keamanan jaringanmu sudah Level 1.
